FROM --platform=$TARGETPLATFORM falkordb/falkordb-build:ubuntu as build

ARG TARGETPLATFORM

WORKDIR /FalkorDB

ADD . /FalkorDB

RUN make

EXPOSE 6379/tcp

ENV FALKORDB_ARGS="MAX_QUEUED_QUERIES 25 TIMEOUT 1000 RESULTSET_SIZE 10000"

CMD /FalkorDB/build/docker/run.sh
                 
