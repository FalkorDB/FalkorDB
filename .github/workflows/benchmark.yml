name: Benchmark build
on:
  workflow_dispatch:
  pull_request:
    branches: [ master ]
    types: [ labeled ]
  push:
    branches:
      - master
    tags:
      - v*

jobs:
  BenchmarkA:
    if: ${{ github.event.label.name == 'action:run-benchmark' }}
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install dependencies
        working-directory: tests/benchmarks
        run: |
          pip3 install -r requirements.txt
      - name: Run benchmark
        working-directory: tests/benchmarks
        run: |
          python3 benchmark.py 0-10

  BenchmarkB:
    if: ${{ github.event.label.name == 'action:run-benchmark' }}
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Install dependencies
        working-directory: tests/benchmarks
        run: |
          pip3 install -r requirements.txt
      - name: Run benchmark
        working-directory: tests/benchmarks
        run: |
          python3 benchmark.py 10-19