name: Build on macOS

on:
  push:
  workflow_dispatch:

jobs:
  build:
    runs-on: macos-latest
    steps:

    - name: Setup Docker on macOS
      uses: douglascamata/setup-docker-macos-action@v1-alpha

    - name: Safe dir
      run: git config --global --add safe.directory '*'

    - uses: actions/checkout@v3
      with:
        set-safe-directory: '*'
        submodules: recursive

    - name: Build
      working-directory: /FalkorDB
      run: make
